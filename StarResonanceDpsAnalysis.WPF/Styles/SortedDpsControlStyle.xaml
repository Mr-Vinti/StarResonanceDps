<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="clr-namespace:StarResonanceDpsAnalysis.WPF.Controls">

    <Style TargetType="ctrl:SortedDpsControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ctrl:SortedDpsControl">
                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                        <ListBox
                            x:Name="PART_ListBox"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            AlternationCount="10000"
                            Background="Transparent"
                            BorderThickness="0"
                            ItemTemplate="{Binding ItemTemplate, RelativeSource={RelativeSource TemplatedParent}}"
                            ItemsSource="{Binding Data, RelativeSource={RelativeSource TemplatedParent}}"
                            ScrollViewer.CanContentScroll="True"
                            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                            SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}">

                            <!--  VirtualizingStackPanel.IsVirtualizing="True"  -->
                            <!--  VirtualizingStackPanel.VirtualizationMode="Recycling"  -->
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                </Style>
                            </ListBox.ItemContainerStyle>

                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <!-- <VirtualizingStackPanel /> -->
                                    <!-- <StackPanel /> -->
                                    <ctrl:AnimatedStackPanel />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                        </ListBox>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>