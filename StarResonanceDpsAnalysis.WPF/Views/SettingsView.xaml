<Window
    x:Class="StarResonanceDpsAnalysis.WPF.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:behaviors="clr-namespace:StarResonanceDpsAnalysis.WPF.Behaviors"
    xmlns:ctrl="clr-namespace:StarResonanceDpsAnalysis.WPF.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:lex="http://wpflocalizeextension.codeplex.com"
    xmlns:loc="clr-namespace:StarResonanceDpsAnalysis.WPF.Properties"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vms="clr-namespace:StarResonanceDpsAnalysis.WPF.ViewModels"
    Title="{lex:Loc Key={x:Static loc:ResourcesKeys.Window_Settings_Title}}"
    Width="780"
    Height="690"
    MinWidth="660"
    MinHeight="540"
    d:DesignHeight="1000"
    d:DataContext="{d:DesignInstance Type=vms:SettingsDesignTimeViewModel,
                                     IsDesignTimeCreatable=True}"
    lex:LocalizeDictionary.DesignCulture="zh-CN"
    lex:ResxLocalizationProvider.DefaultAssembly="StarResonanceDpsAnalysis.WPF"
    lex:ResxLocalizationProvider.DefaultDictionary="Resources"
    PreviewKeyDown="Window_PreviewKeyDown"
    Style="{StaticResource TransparentWindow}"
    mc:Ignorable="d">

    <!--  WindowChrome: 开启可拉伸边界  -->
    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="0"
            GlassFrameThickness="0"
            ResizeBorderThickness="6"
            UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>

    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction Command="{Binding LoadedCommand}" />
        </b:EventTrigger>
    </b:Interaction.Triggers>

    <Window.Resources>

        <Style x:Key="SelectedIconfont" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="pack://application:,,,/Assets/Fonts/#IconFont" />
            <Setter Property="Foreground" Value="#FFF" />
            <Setter Property="VerticalAlignment" Value="Bottom" />
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="Margin" Value="2" />
        </Style>

        <Style x:Key="SettingSectionListBorder" TargetType="Border">
            <Setter Property="Margin" Value="10" />
            <Setter Property="CornerRadius" Value="5" />
            <Setter Property="Background" Value="#FFF" />
        </Style>

        <Style x:Key="SettingSectionListTitleBorder" TargetType="Border">
            <Setter Property="Background" Value="#2297F4" />
            <Setter Property="Padding" Value="10" />
            <Setter Property="CornerRadius" Value="5,5,0,0" />
        </Style>

        <Style x:Key="SettingSectionListTitle" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">
            <Setter Property="Foreground" Value="#FFF" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="FontSize" Value="16" />
        </Style>

        <Style x:Key="SectionTitleButton" TargetType="Button">
            <Setter Property="BorderBrush" Value="#EEE" />
            <Setter Property="BorderThickness" Value="0,0,0,1" />
        </Style>

        <Style x:Key="SectionTitleBorder" TargetType="Border">
            <Setter Property="Padding" Value="10" />
        </Style>

        <Style x:Key="SectionListTitleText" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">

        </Style>

        <Style x:Key="SectionTitlePointer" TargetType="Border">
            <Setter Property="Width" Value="8" />
            <Setter Property="Height" Value="8" />
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="BorderBrush" Value="#000" />
            <Setter Property="BorderThickness" Value="0,1,1,0" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <RotateTransform Angle="45" />
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SettingDetailListBorder" TargetType="Border">
            <Setter Property="Margin" Value="10" />
            <Setter Property="Padding" Value="20,20,5,0" />
            <Setter Property="CornerRadius" Value="5" />
            <Setter Property="Background" Value="#FFF" />
        </Style>

        <Style x:Key="TitleStrip" TargetType="Border">
            <Setter Property="Width" Value="3" />
            <Setter Property="Height" Value="24" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="Background" Value="#2297F4" />
        </Style>

        <Style x:Key="SectionTitleText" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="20,0,0,10" />
            <Setter Property="FontSize" Value="18" />
            <Setter Property="Foreground" Value="#2297F4" />
        </Style>

        <Style x:Key="SectionSubTitleText" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,0,10,6" />
            <Setter Property="Foreground" Value="#2297F4" />
        </Style>

        <Style x:Key="SectionBorder" TargetType="Border">
            <Setter Property="BorderBrush" Value="#E5E5E5" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Margin" Value="0,0,10,30" />
        </Style>

        <Style x:Key="SectionStackPanel" TargetType="StackPanel">

        </Style>

        <Style x:Key="SectionFieldBorderBase" TargetType="Border">
            <Setter Property="Padding" Value="20,10,10,10" />
        </Style>

        <Style x:Key="SectionFieldBorder" TargetType="Border" BasedOn="{StaticResource SectionFieldBorderBase}">
            <Setter Property="BorderBrush" Value="#E5E5E5" />
            <Setter Property="BorderThickness" Value="0,0,0,2" />
        </Style>

        <Style x:Key="FieldName" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <Style x:Key="FieldComboBox" TargetType="ComboBox" BasedOn="{StaticResource AntComboBoxStyle}">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style x:Key="CardHeaderGridStyle" TargetType="Grid">
            <Setter Property="Height" Value="{StaticResource CardHeaderHeight}" />
        </Style>

        <Style x:Key="AutoSelectButton" TargetType="Button" BasedOn="{StaticResource AntPrimaryButtonStyle}">
            <Setter Property="Padding" Value="15,0,15,0" />
        </Style>

        <Style x:Key="SuffixText" TargetType="TextBlock" BasedOn="{StaticResource NormalTextBlockBaseStyle}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <Style x:Key="ThemeButtonBorder" TargetType="Border">
            <Setter Property="BorderBrush" Value="#EEE" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="5" />
        </Style>

        <Style x:Key="ThemeButton" TargetType="Button">
            <Setter Property="Width" Value="30" />
            <Setter Property="Height" Value="30" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Margin" Value="0,0,5,0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border Style="{StaticResource ThemeButtonBorder}"
                                Background="{TemplateBinding Background}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ThemeButton_Active" TargetType="Button" BasedOn="{StaticResource ThemeButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border Style="{StaticResource ThemeButtonBorder}"
                                Background="{TemplateBinding Background}">
                            <TextBlock
                                Style="{StaticResource SelectedIconfont}"
                                Text="&#xe64d;"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ImageSelectButton" TargetType="Button" BasedOn="{StaticResource AntButtonStyle}">
            <Setter Property="Padding" Value="12,4,12,4" />
        </Style>

        <DataTemplate x:Key="LocalizedEnumTextBlockDataTemplate">
            <TextBlock Text="{Binding Display}" />
        </DataTemplate>

    </Window.Resources>
    
    <Border Background="#ECEBE9" Style="{StaticResource ShadowWindowBorder}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <ctrl:Header Title="{lex:Loc Key={x:Static loc:ResourcesKeys.Window_Settings_Title}}" Grid.Row="0" />

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="200"/>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border 
                    Style="{StaticResource SettingSectionListBorder}"
                    Grid.Column="0">
                    <StackPanel>

                        <Border Style="{StaticResource SettingSectionListTitleBorder}">
                            <TextBlock
                                Style="{StaticResource SettingSectionListTitle}"
                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Window_Settings_Title}}" />
                        </Border>

                        <Button Style="{StaticResource SectionTitleButton}" Click="Nav_Language_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border 
                                        x:Name="bb"
                                        Style="{StaticResource SectionTitleBorder}">

                                        <Grid>
                                            <TextBlock 
                                                Style="{StaticResource SectionListTitleText}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Language_Title}}"/>

                                            <Border Style="{StaticResource SectionTitlePointer}"/>
                                        </Grid>
                                    </Border>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bb" Property="Background" Value="#EEE" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Style="{StaticResource SectionTitleButton}" Click="Nav_Basic_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border 
                                        x:Name="bb"
                                        Style="{StaticResource SectionTitleBorder}">

                                        <Grid>
                                            <TextBlock 
                                                Style="{StaticResource SectionListTitleText}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Basic_Title}}"/>

                                            <Border Style="{StaticResource SectionTitlePointer}"/>
                                        </Grid>
                                    </Border>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bb" Property="Background" Value="#EEE" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Style="{StaticResource SectionTitleButton}" Click="Nav_Shortcut_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border 
                                        x:Name="bb"
                                        Style="{StaticResource SectionTitleBorder}">

                                        <Grid>
                                            <TextBlock 
                                                Style="{StaticResource SectionListTitleText}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Shortcut_Title}}"/>

                                            <Border Style="{StaticResource SectionTitlePointer}"/>
                                        </Grid>
                                    </Border>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bb" Property="Background" Value="#EEE" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Style="{StaticResource SectionTitleButton}" Click="Nav_Combat_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border 
                                        x:Name="bb"
                                        Style="{StaticResource SectionTitleBorder}">

                                        <Grid>
                                            <TextBlock 
                                                Style="{StaticResource SectionListTitleText}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Combat_Title}}"/>

                                            <Border Style="{StaticResource SectionTitlePointer}"/>
                                        </Grid>
                                    </Border>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bb" Property="Background" Value="#EEE" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Style="{StaticResource SectionTitleButton}" Click="Nav_Theme_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border 
                                        x:Name="bb"
                                        Style="{StaticResource SectionTitleBorder}">

                                        <Grid>
                                            <TextBlock 
                                                Style="{StaticResource SectionListTitleText}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Theme_Title}}"/>

                                            <Border Style="{StaticResource SectionTitlePointer}"/>
                                        </Grid>
                                    </Border>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bb" Property="Background" Value="#EEE" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                    </StackPanel>
                </Border>

                <Border 
                    Style="{StaticResource SettingDetailListBorder}"
                    Grid.Column="1">
                    <ScrollViewer x:Name="ContentScrollViewer" VerticalScrollBarVisibility="Auto">
                        <StackPanel>

                            <Grid x:Name="SectionLanguage">
                                <Border Style="{StaticResource TitleStrip}"/>
                                <TextBlock
                                    Style="{StaticResource SectionTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Language_Title}}"/>
                                <TextBlock
                                    Style="{StaticResource SectionSubTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Language_Description}}"/>
                            </Grid>

                            <Border Style="{StaticResource SectionBorder}">
                                <StackPanel Style="{StaticResource SectionStackPanel}">

                                    <Border Style="{StaticResource SectionFieldBorderBase}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Language_Title}}"
                                                Grid.Column="0"/>
                                            <ComboBox
                                                Style="{StaticResource FieldComboBox}"
                                                ItemTemplate="{StaticResource LocalizedEnumTextBlockDataTemplate}"
                                                ItemsSource="{Binding AvailableLanguages}"
                                                SelectedItem="{Binding SelectedLanguage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Grid.Column="2" />
                                        </Grid>
                                    </Border>

                                </StackPanel>
                            </Border>

                            <Grid x:Name="SectionBasic">
                                <Border Style="{StaticResource TitleStrip}"/>
                                <TextBlock
                                    Style="{StaticResource SectionTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Basic_Title}}"/>
                                <TextBlock
                                    Style="{StaticResource SectionSubTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Basic_Sub}}"/>
                            </Grid>

                            <Border Style="{StaticResource SectionBorder}">
                                <StackPanel Style="{StaticResource SectionStackPanel}">

                                    <Border Style="{StaticResource SectionFieldBorderBase}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_NetworkAdapter_Label}}"
                                                Grid.Column="0"/>
                                            <Grid Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <ComboBox
                                                    Style="{StaticResource AntComboBoxStyle}"
                                                    ItemsSource="{Binding AvailableNetworkAdapters, UpdateSourceTrigger=PropertyChanged}"
                                                    SelectedItem="{Binding AppConfig.PreferredNetworkAdapter, Mode=TwoWay}"
                                                    DisplayMemberPath="Description"
                                                    SelectedValuePath="Description"
                                                    Grid.Column="0" />
                                                <Button
                                                    Style="{StaticResource AutoSelectButton}"
                                                    Command="{Binding NetworkAdapterAutoSelectCommand}"
                                                    Content="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_NetworkAdapterAutoSelect_Button}}"
                                                    Grid.Column="2" />
                                            </Grid>
                                        </Grid>
                                    </Border>

                                </StackPanel>
                            </Border>

                            <Grid x:Name="SectionShortcut">
                                <Border Style="{StaticResource TitleStrip}"/>
                                <TextBlock
                                    Style="{StaticResource SectionTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Shortcut_Title}}"/>
                                <TextBlock
                                    Style="{StaticResource SectionSubTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Shortcut_Sub}}"/>
                            </Grid>

                            <Border Style="{StaticResource SectionBorder}">
                                <StackPanel Style="{StaticResource SectionStackPanel}">

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_MouseThrough}}"
                                                Grid.Column="0"/>
                                            <TextBox
                                                x:Name="MouseThroughTextBox"
                                                Style="{StaticResource AntTextBoxStyle}"
                                                Grid.Column="2"
                                                IsReadOnly="True"
                                                Text="{Binding AppConfig.MouseThroughShortcut, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource KeyToStringConverter}}"
                                                ToolTip="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_MouseThrough_Tooltip}}">
                                                <b:Interaction.Behaviors>
                                                    <behaviors:KeyDownCommandBehavior Command="{Binding HandleMouseThroughShortcutCommand}" />
                                                </b:Interaction.Behaviors>
                                            </TextBox>
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_ClearData}}"
                                                Grid.Column="0"/>
                                            <TextBox
                                                x:Name="ClearDataTextBox"
                                                Style="{StaticResource AntTextBoxStyle}"
                                                Grid.Column="2"
                                                IsReadOnly="True"
                                                Text="{Binding AppConfig.ClearDataShortcut, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource KeyToStringConverter}}"
                                                ToolTip="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_ClearData_Tooltip}}">
                                                <b:Interaction.Behaviors>
                                                    <behaviors:KeyDownCommandBehavior Command="{Binding HandleClearDataShortcutCommand}" />
                                                </b:Interaction.Behaviors>
                                            </TextBox>
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorderBase}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_TopMost}}"
                                                Grid.Column="0"/>
                                            <TextBox
                                                x:Name="TopMostTextBox"
                                                Style="{StaticResource AntTextBoxStyle}"
                                                Grid.Column="2"
                                                IsReadOnly="True"
                                                Text="{Binding AppConfig.TopmostShortcut, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource KeyToStringConverter}}"
                                                ToolTip="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Shortcut_TopMost_Tooltip}}">
                                                <b:Interaction.Behaviors>
                                                    <behaviors:KeyDownCommandBehavior Command="{Binding HandleTopMostShortcutCommand}" />
                                                </b:Interaction.Behaviors>
                                            </TextBox>
                                        </Grid>
                                    </Border>

                                </StackPanel>
                            </Border>

                            <Grid x:Name="SectionCombat">
                                <Border Style="{StaticResource TitleStrip}"/>
                                <TextBlock
                                    Style="{StaticResource SectionTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Combat_Title}}"/>
                                <TextBlock
                                    Style="{StaticResource SectionSubTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Combat_Sub}}"/>
                            </Grid>

                            <Border Style="{StaticResource SectionBorder}">
                                <StackPanel Style="{StaticResource SectionStackPanel}">

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Combat_ClearAfterBattle}}"
                                                Grid.Column="0"/>
                                            <Grid Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <TextBox
                                                    Style="{StaticResource AntTextBoxStyle}"
                                                    Text="{Binding AppConfig.CombatTimeClearDelay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Grid.Column="0" />
                                                <TextBlock
                                                    Style="{StaticResource SuffixText}"
                                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Common_Seconds}}"
                                                    Grid.Column="2"  />
                                            </Grid>
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Combat_ClearAfterTeleport}}"
                                                Grid.Column="0"/>
                                            <Border 
                                                HorizontalAlignment="Right"
                                                Grid.Column="2">
                                                <ctrl:SwitchControl
                                                    OffContent="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Switch_Off}}"
                                                    OnContent="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Switch_On}}"
                                                    IsChecked="{Binding AppConfig.ClearLogAfterTeleport, Mode=TwoWay}" />
                                            </Border>
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Display_NumberMode}}"
                                                Grid.Column="0"/>
                                            <ComboBox
                                                Style="{StaticResource AntComboBoxStyle}"
                                                ItemTemplate="{StaticResource LocalizedEnumTextBlockDataTemplate}"
                                                ItemsSource="{Binding AvailableNumberDisplayModes}"
                                                SelectedItem="{Binding SelectedNumberDisplayMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Grid.Column="2" />
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorderBase}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Display_Opacity}}"
                                                Grid.Column="0"/>
                                            <Grid Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="35" />
                                                </Grid.ColumnDefinitions>

                                                <Slider
                                                    Style="{StaticResource AntSliderStyle}"
                                                    Maximum="95"
                                                    Minimum="5"
                                                    Value="{Binding AppConfig.Opacity, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    IsSnapToTickEnabled="True"
                                                    TickFrequency="1"
                                                    Grid.Column="0" />
                                                <TextBlock
                                                    Style="{StaticResource SuffixText}"
                                                    Text="{Binding AppConfig.Opacity, Mode=OneWay}"
                                                    Grid.Column="2" />
                                            </Grid>
                                        </Grid>
                                    </Border>

                                </StackPanel>
                            </Border>

                            <Grid x:Name="SectionTheme">
                                <Border Style="{StaticResource TitleStrip}"/>
                                <TextBlock
                                    Style="{StaticResource SectionTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Theme_Title}}"/>
                                <TextBlock
                                    Style="{StaticResource SectionSubTitleText}"
                                    Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Section_Theme_Description}}"/>
                            </Grid>

                            <Border Style="{StaticResource SectionBorder}">
                                <StackPanel Style="{StaticResource SectionStackPanel}">

                                    <Border Style="{StaticResource SectionFieldBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Theme_WindowColor}}"
                                                Grid.Column="0"/>
                                            <Border 
                                                HorizontalAlignment="Right"
                                                Grid.Column="2">
                                                <WrapPanel>
                                                    <Button Style="{StaticResource ThemeButton_Active}" Background="#1690F8"/>
                                                    <Button Style="{StaticResource ThemeButton}" Background="#FFA9A8"/>
                                                    <Button Style="{StaticResource ThemeButton}" Background="#F7A0DD"/>
                                                    <Button Style="{StaticResource ThemeButton}" Background="#2F2F2F"/>
                                                    <Button Style="{StaticResource ThemeButton}" Background="#D0D0D0"/>
                                                    <Button Style="{StaticResource ThemeButton}">
                                                        <Button.Template>
                                                            <ControlTemplate>
                                                                <Border Style="{StaticResource ThemeButtonBorder}">
                                                                    <Grid>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="*" />
                                                                            <RowDefinition Height="*" />
                                                                        </Grid.RowDefinitions>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*" />
                                                                            <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <Border
                                                                            Background="#1FD1B5"
                                                                            CornerRadius="5,0,0,0"
                                                                            Grid.Row="0"
                                                                            Grid.Column="0"/>
                                                                        <Border
                                                                            Background="#FFD400"
                                                                            CornerRadius="0,5,0,0"
                                                                            Grid.Row="0"
                                                                            Grid.Column="1"/>
                                                                        <Border
                                                                            Background="#00A2FD"
                                                                            CornerRadius="0,0,0,5"
                                                                            Grid.Row="1"
                                                                            Grid.Column="0"/>
                                                                        <Border
                                                                            Background="#FF6663"
                                                                            CornerRadius="0,0,5,0"
                                                                            Grid.Row="1"
                                                                            Grid.Column="1"/>
                                                                    </Grid>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Button.Template>
                                                    </Button>
                                                </WrapPanel>
                                            </Border>
                                        </Grid>
                                    </Border>

                                    <Border Style="{StaticResource SectionFieldBorderBase}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="39*" />
                                                <ColumnDefinition Width="*" MinWidth="10" />
                                                <ColumnDefinition Width="60*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock 
                                                Style="{StaticResource FieldName}"
                                                Text="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Theme_BackgroundImage}}"
                                                Grid.Column="0"/>
                                            <Border
                                                HorizontalAlignment="Right"
                                                Grid.Column="2">
                                                <Button
                                                    Style="{StaticResource ImageSelectButton}"
                                                    Content="{lex:Loc Key={x:Static loc:ResourcesKeys.Settings_Theme_SelectImage}}"/>
                                            </Border>
                                        </Grid>
                                    </Border>

                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </Border>

            </Grid>

            <ctrl:Footer
                Height="50"
                ConfirmClick="Footer_ConfirmClick"
                CancelClick="Footer_CancelClick"
                ConfirmCommand="{Binding ConfirmCommand}"
                CancelCommand="{Binding CancelCommand}"
                Grid.Row="2" />
        </Grid>
    </Border>
</Window>
